{"ast":null,"code":"var _jsxFileName = \"/home/vinicius/\\xC1rea de Trabalho/App-Flask-React/client/src/pages/Autenticado.jsx\";\nimport React from 'react';\nimport axios from 'axios';\nimport { saveCookie, getCookie, removeCookie } from \"../cookie/cookieSession\";\nimport { saveCookieUserInfo, getCookieUserInfo, getAllCookieUserInfo, removeCookieUserInfo } from '../cookie/cookieUserInfo'; //Função de Logout\n\nfunction logout() {\n  console.log(\"To na função de logout!\"); //Coleta dos cookies o idToken e o sessionState\n\n  const idtoken = getCookie('ID_TOKEN');\n  const sessionState = getCookie('SESSION_STATE');\n  console.log('ID TOKEN: ', idtoken, 'SESSION STATE:', sessionState); //Rota que envia para o back-end o idToken e o sessionState\n\n  axios.post('/logout', {\n    idToken: idtoken,\n    state: sessionState\n  }).then(function (url_logout) {\n    console.log(url_logout);\n    removeCookie();\n    removeCookieUserInfo();\n    window.location.href = url_logout.data;\n  });\n} //Função pegar dados do Token de Acesso\n\n\nfunction token() {\n  axios.get('/token').then(token_access => {\n    console.log(\"OS DADOS DO TOKEN SAO: \", token_access.data);\n    saveCookie(token_access.data); //Armazena os dados do token em cookie\n\n    console.log(\"ESTOU AQUI PEGANDO OS DADOS DO TOKEN\");\n  });\n}\n\nfunction userinfo() {\n  axios.get('/infouser').then(infouser => {\n    console.log(\"AS USER INFO SAO: \", infouser.data);\n    saveCookieUserInfo(infouser.data); //Armazena os dados do token em cookie\n  });\n} //Váriavél Global para pegar dos Cookies\n\n\nfunction Receita() {\n  var permition = 5;\n  const rolesCookie = getAllCookieUserInfo();\n  console.log(rolesCookie.ROLES);\n\n  for (var i = 0; i < 10; i++) {\n    if (rolesCookie.ROLES[i] === \"TEAM_TI\") {\n      console.log(\"PERMITIDO ENTRAR\");\n      window.location.href = \"http://localhost:3000/Receita\";\n      permition = 1;\n    }\n  }\n\n  console.log(\"Number of permition: \", permition);\n\n  if (permition === 5) {\n    axios.get('/login2').then(url_login => {\n      console.log(\"O heard e : \", url_login.headers);\n      window.location.href = url_login.data; //Abre no brwoser a URL de login recebida.\n    });\n  }\n}\n\nfunction Despesas() {\n  axios.get('/autorizacao').then(info => {\n    console.log(\"O que veio: \", info.data);\n  });\n}\n/*\nfunction Licitacoes(){\n\n}\n\n*/\n\n\nclass Logado extends React.Component {\n  render() {\n    token();\n    userinfo();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Logado-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \"Autentica\\xE7\\xE3o Realizada!\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"botao\",\n      onClick: Receita,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, \"Receita\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"botao\",\n      onClick: Despesas,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, \"Despesas\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"botao\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, \"Licita\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"botao\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }, \"ADM\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button-logout\",\n      onClick: logout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, \"Logout\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default Logado;","map":{"version":3,"sources":["/home/vinicius/Área de Trabalho/App-Flask-React/client/src/pages/Autenticado.jsx"],"names":["React","axios","saveCookie","getCookie","removeCookie","saveCookieUserInfo","getCookieUserInfo","getAllCookieUserInfo","removeCookieUserInfo","logout","console","log","idtoken","sessionState","post","idToken","state","then","url_logout","window","location","href","data","token","get","token_access","userinfo","infouser","Receita","permition","rolesCookie","ROLES","i","url_login","headers","Despesas","info","Logado","Component","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {saveCookie, getCookie, removeCookie} from \"../cookie/cookieSession\";\nimport {saveCookieUserInfo, getCookieUserInfo, getAllCookieUserInfo, removeCookieUserInfo} from '../cookie/cookieUserInfo';\n\n\n\n//Função de Logout\nfunction logout() {\n    console.log(\"To na função de logout!\") \n    \n    //Coleta dos cookies o idToken e o sessionState\n    const idtoken = getCookie('ID_TOKEN');\n    const sessionState = getCookie('SESSION_STATE');\n    console.log('ID TOKEN: ', idtoken, 'SESSION STATE:', sessionState);\n\n    //Rota que envia para o back-end o idToken e o sessionState\n      axios\n      .post('/logout', {\n          idToken: idtoken,\n          state: sessionState,\n      })\n      .then(function (url_logout){\n          console.log(url_logout);\n          removeCookie();\n          removeCookieUserInfo();\n          window.location.href = url_logout.data;\n      })\n      \n    }\n\n\n\n//Função pegar dados do Token de Acesso\nfunction token () {\n    axios\n    .get('/token')\n    .then(token_access => {\n    console.log(\"OS DADOS DO TOKEN SAO: \", token_access.data)\n    saveCookie(token_access.data); //Armazena os dados do token em cookie\n    console.log(\"ESTOU AQUI PEGANDO OS DADOS DO TOKEN\")\n    });\n\n}\n\n\nfunction userinfo (){\n    axios\n    .get('/infouser')\n    .then(infouser => {\n    console.log(\"AS USER INFO SAO: \", infouser.data)\n    saveCookieUserInfo(infouser.data); //Armazena os dados do token em cookie\n    });\n\n   \n}\n\n\n\n\n//Váriavél Global para pegar dos Cookies\n\n\nfunction Receita (){\nvar permition = 5;  \n\n    const rolesCookie = getAllCookieUserInfo();\n\n    console.log(rolesCookie.ROLES);\n   for (var i=0; i < 10; i++){\n    \n        if(rolesCookie.ROLES[i] === \"TEAM_TI\" ){\n            console.log(\"PERMITIDO ENTRAR\");\n            window.location.href = \"http://localhost:3000/Receita\"\n            permition = 1;\n        }\n   }\n\nconsole.log (\"Number of permition: \", permition);\n\n   if (permition === 5){\n\n    axios\n    .get('/login2')\n    .then(url_login => {\n      console.log(\"O heard e : \", url_login.headers);\n      window.location.href = url_login.data //Abre no brwoser a URL de login recebida.\n    })\n   }\n\n}\n\n\n\nfunction Despesas(){\n   \n    axios\n    .get('/autorizacao')\n    .then(info =>{\n        console.log(\"O que veio: \", info.data);\n    })\n}\n\n/*\nfunction Licitacoes(){\n\n}\n\n*/\n\n\nclass Logado extends React.Component{\n  \n    \n    \n    render (){\n        \n        token();\n        userinfo();\n        \n    \n\n            \n        return (\n            <div className=\"Logado-header\">\n                <h2>Autenticação Realizada!</h2>\n                <br></br>\n\n\n<div>\n                <button\n                            className=\"botao\"\n                             onClick = {Receita}\n                            >\n                                Receita\n                    </button>\n               \n\n                <button\n                            className=\"botao\"\n                            onClick = {Despesas}\n                            >\n                                Despesas\n                    </button>\n\n                    <button\n                            className=\"botao\"\n        \n                            >\n                                Licitações\n                    </button>\n\n                    <button\n                            className=\"botao\"\n        \n                            >\n                                ADM\n                    </button>\n</div>\n\n                <button\n                            className=\"button-logout\"\n                             onClick = {logout}\n                            >\n                                Logout\n                            </button>\n                <br></br>\n\n\n                <div >\n                \n                </div>\n            </div>\n\n\n        )\n\n\n    }\n\n\n\n\n}\n\n\n\n\nexport default Logado;"]},"metadata":{},"sourceType":"module"}